<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Places Visited</title>
  <script src="https://unpkg.com/globe.gl@2.27.1/dist/globe.gl.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1a2e;
      overflow: hidden;
    }
    #globe-container {
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .place-label {
      color: #fff;
      font-size: 11px;
      font-weight: 500;
      text-shadow: 0 0 4px rgba(0,0,0,0.8);
      pointer-events: none;
    }
    .tooltip {
      position: fixed;
      padding: 10px 14px;
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      color: #fff;
      font-size: 13px;
      pointer-events: none;
      z-index: 1000;
      max-width: 250px;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .tooltip h3 {
      margin: 0 0 4px 0;
      font-size: 14px;
      color: #64ffda;
    }
    .tooltip p {
      margin: 0;
      opacity: 0.8;
      font-size: 12px;
    }
    .legend {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: rgba(26, 26, 46, 0.9);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 12px 16px;
      color: #fff;
      font-size: 12px;
      backdrop-filter: blur(10px);
    }
    .legend-item {
      display: flex;
      align-items: center;
      margin: 4px 0;
    }
    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 8px;
    }
    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 8px;
    }
    .control-btn {
      background: rgba(26, 26, 46, 0.9);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 6px;
      padding: 8px 12px;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
      backdrop-filter: blur(10px);
      transition: all 0.2s;
    }
    .control-btn:hover {
      background: rgba(100, 255, 218, 0.2);
      border-color: #64ffda;
    }
    .stats {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(26, 26, 46, 0.9);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 12px 16px;
      color: #fff;
      backdrop-filter: blur(10px);
    }
    .stats h2 {
      font-size: 24px;
      color: #64ffda;
      margin: 0;
    }
    .stats p {
      font-size: 12px;
      opacity: 0.7;
      margin: 4px 0 0 0;
    }
  </style>
</head>
<body>
  <div id="globe-container"></div>
  <div class="tooltip" id="tooltip" style="display: none;"></div>

  <div class="stats">
    <h2 id="country-count">0</h2>
    <p>countries visited</p>
  </div>

  <div class="controls">
    <button class="control-btn" onclick="toggleAutoRotate()">Pause Rotation</button>
    <button class="control-btn" onclick="resetView()">Reset View</button>
  </div>

  <div class="legend">
    <div class="legend-item">
      <div class="legend-dot" style="background: #64ffda;"></div>
      <span>Lived</span>
    </div>
    <div class="legend-item">
      <div class="legend-dot" style="background: #ffd700;"></div>
      <span>Extended Stay</span>
    </div>
    <div class="legend-item">
      <div class="legend-dot" style="background: #ff6b6b;"></div>
      <span>Visited</span>
    </div>
  </div>

  <script>
    // Places data - edit this to add your travels
    // Types: 'lived', 'extended', 'visited'
    const places = [
      // Add your places here in this format:
      // { name: 'City Name', country: 'Country', lat: 0.0, lng: 0.0, type: 'visited', note: 'Optional note' },

      // Example places (replace with your own):
      { name: 'San Francisco', country: 'USA', lat: 37.7749, lng: -122.4194, type: 'lived', note: 'Bay Area life' },
      { name: 'New York', country: 'USA', lat: 40.7128, lng: -74.0060, type: 'extended', note: 'The city that never sleeps' },
      { name: 'London', country: 'UK', lat: 51.5074, lng: -0.1278, type: 'visited', note: 'Tea and history' },
      { name: 'Tokyo', country: 'Japan', lat: 35.6762, lng: 139.6503, type: 'visited', note: 'Neon dreams' },
      { name: 'Mumbai', country: 'India', lat: 19.0760, lng: 72.8777, type: 'lived', note: 'Maximum city' },
      { name: 'Bangalore', country: 'India', lat: 12.9716, lng: 77.5946, type: 'lived', note: 'Tech hub' },
      { name: 'Singapore', country: 'Singapore', lat: 1.3521, lng: 103.8198, type: 'visited', note: 'Garden city' },
      { name: 'Dubai', country: 'UAE', lat: 25.2048, lng: 55.2708, type: 'visited', note: 'Desert oasis' },
      { name: 'Paris', country: 'France', lat: 48.8566, lng: 2.3522, type: 'visited', note: 'City of lights' },
      { name: 'Bangkok', country: 'Thailand', lat: 13.7563, lng: 100.5018, type: 'visited', note: 'Street food heaven' },
    ];

    const typeColors = {
      lived: '#64ffda',
      extended: '#ffd700',
      visited: '#ff6b6b'
    };

    // Count unique countries
    const uniqueCountries = new Set(places.map(p => p.country)).size;
    document.getElementById('country-count').textContent = uniqueCountries;

    // Initialize globe
    const globe = Globe()
      .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
      .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
      .backgroundImageUrl('https://unpkg.com/three-globe/example/img/night-sky.png')
      .pointsData(places)
      .pointLat('lat')
      .pointLng('lng')
      .pointColor(d => typeColors[d.type])
      .pointAltitude(0.01)
      .pointRadius(0.4)
      .pointsMerge(false)
      .labelsData(places)
      .labelLat('lat')
      .labelLng('lng')
      .labelText('name')
      .labelSize(0.8)
      .labelDotRadius(0.4)
      .labelColor(() => 'rgba(255, 255, 255, 0.9)')
      .labelResolution(2)
      .labelAltitude(0.015)
      .onPointHover(handleHover)
      .onLabelHover(handleHover)
      (document.getElementById('globe-container'));

    // Auto-rotate
    globe.controls().autoRotate = true;
    globe.controls().autoRotateSpeed = 0.5;

    // Set initial view
    globe.pointOfView({ lat: 20, lng: 0, altitude: 2.5 });

    // Tooltip handling
    const tooltip = document.getElementById('tooltip');

    function handleHover(point, event) {
      if (point) {
        tooltip.innerHTML = `
          <h3>${point.name}, ${point.country}</h3>
          ${point.note ? `<p>${point.note}</p>` : ''}
        `;
        tooltip.style.display = 'block';
        tooltip.style.left = event.clientX + 15 + 'px';
        tooltip.style.top = event.clientY + 15 + 'px';
      } else {
        tooltip.style.display = 'none';
      }
    }

    // Track mouse for tooltip
    document.addEventListener('mousemove', (e) => {
      if (tooltip.style.display === 'block') {
        tooltip.style.left = e.clientX + 15 + 'px';
        tooltip.style.top = e.clientY + 15 + 'px';
      }
    });

    // Control functions
    let isRotating = true;
    function toggleAutoRotate() {
      isRotating = !isRotating;
      globe.controls().autoRotate = isRotating;
      event.target.textContent = isRotating ? 'Pause Rotation' : 'Resume Rotation';
    }

    function resetView() {
      globe.pointOfView({ lat: 20, lng: 0, altitude: 2.5 }, 1000);
    }

    // Responsive
    window.addEventListener('resize', () => {
      globe.width(window.innerWidth);
      globe.height(window.innerHeight);
    });
  </script>
</body>
</html>
